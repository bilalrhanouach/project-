<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مشروع الأبحاث الأكاديمي</title>
    
    <!-- 1. Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. FontAwesome Icons CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- 3. Custom Font (Optional - Tailwind defaults to a nice sans-serif) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;700&display=swap" rel="stylesheet">
    
    <script>
        // Custom configuration for Tailwind to add the Arabic font
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Almarai', 'sans-serif'],
                    },
                },
            },
        };
    </script>
    
    <style>
        /* A small style for smoother accordion transitions */
        .accordion-content {
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
            max-height: 0;
            padding-top: 0;
            padding-bottom: 0;
        }
        
        .accordion-content.open {
            max-height: 500px; /* Adjust as needed */
            padding-top: 1rem; /* 1rem = p-4 */
            padding-bottom: 1rem; /* 1rem = p-4 */
        }

        /* Smooth rotation for the icon */
        .accordion-toggle i {
            transition: transform 0.3s ease-out;
        }

        .accordion-toggle.open i {
            transform: rotate(180deg);
        }
    </style>
</head>
<body class="bg-gray-100 font-sans antialiased">

    <!-- Header Section -->
    <header class="bg-gradient-to-r from-blue-800 to-blue-600 text-white shadow-md">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-10 text-center">
            <h1 class="text-3xl md:text-4xl font-bold mb-3">
                دراسات تقارير سنوية لمجلس المنافسة المغربي | المصادر
            </h1>
            <p class="text-lg text-blue-100 max-w-2xl mx-auto">
                مرحباً بك في الأرشيف الرقمي لمشروع تخرجي. هذا الموقع يضم جميع الأبحاث والملفات المتعلقة بالمشروع.
            </p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto p-4 sm:p-6 lg:p-8">

        <!-- Sources Section -->
        <section class="max-w-4xl mx-auto mb-6">
            <div class="bg-white rounded-lg shadow-md border border-gray-200">
                <div class="px-4 sm:px-6 py-4 border-b border-gray-200 flex items-center justify-between">
                    <h2 class="text-lg font-bold text-blue-800 flex items-center gap-2">
                        <i class="fa-solid fa-folder-open text-blue-600"></i>
                        المصادر (Council Sources)
                    </h2>
                    <span class="text-xs text-gray-400">قائمة سريعة بروابط الملفات</span>
                </div>
                <div id="sources-container" class="p-4 grid grid-cols-1 sm:grid-cols-2 gap-3">
                    <!-- سيتم توليد الروابط هنا عبر JavaScript -->
                </div>
            </div>
        </section>
        
        <!-- App Container -->
        <div class="bg-white rounded-lg shadow-xl overflow-hidden max-w-4xl mx-auto">
            
            <!-- Controls: Search and Sort -->
            <div class="p-4 bg-gray-50 border-b border-gray-200 flex flex-col sm:flex-row gap-4 justify-between items-center">
                
                <!-- Search Input -->
                <div class="relative w-full sm:w-2/3">
                    <span class="absolute start-3 top-1/2 -translate-y-1/2 text-gray-400">
                        <i class="fas fa-search"></i>
                    </span>
                    <input 
                        type="search" 
                        id="search-input"
                        placeholder="ابحث عن بحث معين..."
                        class="w-full ps-10 pe-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                    />
                </div>
                
                <!-- Sort Dropdown -->
                <div class="relative w-full sm:w-1/3">
                    <select 
                        id="sort-select"
                        class="w-full appearance-none bg-white border border-gray-300 rounded-lg shadow-sm ps-4 pe-10 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
                    >
                        <option value="date-desc">الفرز: الأحدث أولاً</option>
                        <option value="date-asc">الفرز: الأقدم أولاً</option>
                        <option value="title-asc">الفرز: أبجدي (أ - ي)</option>
                    </select>
                    <span class="absolute end-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">
                        <i class="fas fa-chevron-down text-xs"></i>
                    </span>
                </div>
            </div>

            <!-- Accordion List Container -->
            <div id="accordion-container" class="divide-y divide-gray-200">
                <!-- JavaScript will populate this area -->
                
                <!-- Example of a loading/no results message -->
                <div id="message-container" class="p-6 text-center text-gray-500 hidden">
                    <p>لا توجد نتائج مطابقة لبحثك.</p>
                </div>
            </div>
            
        </div>
    </main>
    
    <!-- Footer -->
    <footer class="text-center py-6 text-gray-500 text-sm">
        <p>© 2025 [اكتب اسمك هنا]. جميع الحقوق محفوظة.</p>
    </footer>

    <!-- JavaScript Section -->
    <script>
// ========================================================================
// === بيانات الأبحاث - (المكان الوحيد الذي ستحتاج لتعديله) ===
// ========================================================================
// أضف ملفاتك الخاصة هنا. فقط انسخ أحد الكائنات (ما بين {}) وألصقه.
// - title: عنوان البحث (يظهر في القائمة).
// - description: وصف موجز للبحث.
// - date: تاريخ النشر (تنسيق YYYY-MM-DD ليعمل الفرز بشكل صحيح).
// - link: رابط ملف PDF الخاص بك (من جوجل درايف أو أي مكان آخر).
// ========================================================================

// مصادر المجلس (تظهر كرابط مختصر أعلى الصفحة)
const sourcesList = [
  { name: "ملخص الرسالة: الإطار القانوني للتركيز الاقتصادي في التشريع المغربي", link: "https://drive.google.com/open?id=1ueOgHAxtZKD1MshMoVzla_SGcfz2wRgj" },
  { name: "تقرير مشروع القانون رقم 40.21", link: "https://drive.google.com/open?id=1YnuqGjBQ3SFPMjPCjgB2lGmG7BYLiOOB" },
  { name: "مصطلحات قانون المنافسة (عربية - فرنسية).pdf", link: "https://drive.google.com/file/d/1b4LE1w4SE_Q-B8qT9DQG6EvFWvsDY4jZ/view?usp=drive_link" },
  { name: "رأي مجلس المنافسة حول مشروع قرار الحكومة بشأن تسقيف هوامش ربح المحروقات السائلة", link: "https://drive.google.com/file/d/1oeNRxHDg7bJAj7_BwPtH-_v6bHhKinVP/view" },
  { name: "دليل إعداد برامج الملاءمة مع قانون المنافسة داخل المنشآت والمنظمات المهنية", link: "https://drive.google.com/file/d/1fGLqG63VmCjWVWZr1_c17-rULOqNWm7b/view?usp=drive_link" },
  { name: "دراسة حول حالة المنافسة في قطاع الهاتف النقال.pdf", link: "https://drive.google.com/file/d/1TP25dB7-qbai8LunZcB6LFPupUBkYn7u/view?usp=drive_link" },
  { name: "تقرير تتبع تنفيذ التعهدات المتخذة ... الربع الأول 2024", link: "https://drive.google.com/file/d/1WmEvBcPE3RxRUUVdMYtmpq5_dumPovqU/view?usp=drive_link" },
  { name: "المبادئ التوجيهية لعمليات التركيز.pdf", link: "https://drive.google.com/file/d/1EqNrM7pIUNqIS1IyAjRkzoEGi1vDeX6R/view?usp=drive_link" },
  { name: "التقرير السنوي 2024.pdf", link: "https://drive.google.com/file/d/1G91sYrBvJ97CbB8TWleIPrwBPEKwMaGx/view?usp=drive_link" },
  { name: "التقرير السنوي 2023.pdf", link: "https://drive.google.com/file/d/1LzQhCqtVcxB2zlOwWQuADg1Y8VPJmopL/view?usp=drive_link" },
  { name: "التقرير السنوي 2022.pdf", link: "https://drive.google.com/file/d/16ID54_UmYTdSW0dw4rVk7_kWhEhbJYIw/view?usp=drive_link" },
  { name: "التقرير السنوي 2021.pdf", link: "https://drive.google.com/file/d/1qD8RYNC31d_fgYxtd4v3qVK4FGW-Cf5C/view?usp=drive_link" },
];

const papersData = [
    {
        title: "ملخص الرسالة: الإطار القانوني للتركيز الاقتصادي في التشريع المغربي",
        description: "دراسة تحليلية للإطار القانوني لعمليات التركيز الاقتصادي في المغرب (القانون 104.12)، وتوضيح كيفية الموازنة بين تحقيق النمو الاقتصادي والحفاظ على المنافسة الشريفة، مع التركيز على دور مجلس المنافسة.",
        date: "2025-05-10", // <-- تاريخ مقترح، يمكنك تعديله
        link: "https://drive.google.com/open?id=1ueOgHAxtZKD1MshMoVzla_SGcfz2wRgj"
    },
    {
        title: "تقرير مشروع القانون رقم 40.21",
        description: "تقرير مفصل حول مشروع القانون 40.21 وتأثيراته المتوقعة. (يرجى إضافة وصفك الخاص هنا)",
        date: "2025-04-20", // <-- تاريخ مقترح، يمكنك تعديله
        link: "https://drive.google.com/open?id=1YnuqGjBQ3SFPMjPCjgB2lGmG7BYLiOOB"
    }
,
    {
        title: "مصطلحات قانون المنافسة (عربية – فرنسية)",
        description: "وثيقة صادرة عن مجلس المنافسة (CONSEIL DE LA CONCURRENCE) في المملكة المغربية، تحتوي على جدول يضم مصطلحات متخصصة في قانون المنافسة، مع مقابلها باللغتين العربية والفرنسية، بالإضافة إلى بعض الملاحظات أو الشروحات المختصرة لبعض المصطلحات",
        date: "2025-04-25",
        link: "https://drive.google.com/file/d/1b4LE1w4SE_Q-B8qT9DQG6EvFWvsDY4jZ/view?usp=drive_link"
    },
    {
        title: "رأي مجلس المنافسة حول مشروع قرار الحكومة بشأن تسقيف هوامش ربح المحروقات السائلة",
        description: "هو رأي صادر عن مجلس المنافسة المغربي بشأن مشروع قرار للحكومة يهدف إلى إدراج أسعار المحروقات السائلة ضمن قائمة السلع والمنتوجات والخدمات المنظمة أسعارها بشكل مؤقت، أي تسقيف هوامش ربحها. يتضمن الرأي تحليل المجلس لشرعية وفعالية وجدوى هذا الإجراء في إطار القانون 104.12 المتعلق بحرية الأسعار والمنافسة، ويخلص إلى أن شروط تطبيق التدابير المؤقتة (المادة 4) غير مستوفاة وأن التسقيف غير كاف وغير مجدٍ. كما يقدم المجلس توصيات بديلة لمعالجة المشاكل البنيوية في سوق المحروقات (كتطوير المنافسة على مستوى التكرير والتخزين والتوزيع، وإخضاع السوق لآلية مبتكرة للنظامة القطاعية).",
        date: "2025-04-30",
        link: "https://drive.google.com/file/d/1oeNRxHDg7bJAj7_BwPtH-_v6bHhKinVP/view"
    },
    {
        title: "دليل إعداد برامج الملاءمة مع قانون المنافسة داخل المنشآت والمنظمات المهنية",
        description: "هو دليل صادر عن مجلس المنافسة المغربي يهدف إلى توجيه المنشآت والمنظمات المهنية لوضع برامج داخلية للملاءمة والامتثال لقواعد قانون المنافسة (القانون رقم 104.12 والقانون رقم 20.13 والنصوص التطبيقية لهما). يركز الدليل على المقاربة الاستباقية والوقائية لتفادي مخاطر خرق القواعد التنافسية. ويتضمن المكونات الرئيسية لبرنامج الملاءمة (التزامات الإدارة، تعيين مخاطبين، وثيقة إطار، إعلام وتكوين، تحديد المخاطر والتحكم فيها)، وآليات المراقبة (التتبع والإنذار وتدابير الانضباط الداخلي). كما يحدد الدليل المجالات المعرضة للأخطار التنافسية (الاتفاقات المنافية، الاستغلال التعسفي لوضع مهيمن أو تبعية اقتصادية، عمليات التركيز الاقتصادي) ويوضح كيفية تدبيرها، بالإضافة إلى تذكير بالعقوبات المترتبة عن الإخلال بقواعد المنافسة.",
        date: "2025-04-29",
        link: "https://drive.google.com/file/d/1fGLqG63VmCjWVWZr1_c17-rULOqNWm7b/view?usp=drive_link"
    },
    {
        title: "دراسة حول حالة المنافسة في قطاع الهاتف النقال - تقرير تركيبي (نسخة ماي 2011)",
        description: "تقرير تركيبي صادر عن مجلس المنافسة المغربي في ماي 2011، يتناول بالدراسة والتحليل حالة المنافسة في قطاع الهاتف النقال بالمغرب",
        date: "2011-05-01",
        link: "https://drive.google.com/file/d/1TP25dB7-qbai8LunZcB6LFPupUBkYn7u/view?usp=drive_link"
    },
    {
        title: "تقرير تتبع تنفيذ التعهدات المتخذة من لدن شركات توزيع الغازوال والبنزين بالجملة في إطار اتفاقات الصلح المبرمة مع مجلس المنافسة برسم الربع الأول من 2024",
        description: "تقرير صادر عن مجلس المنافسة المغربي يتناول تتبع تنفيذ التعهدات التي التزمت بها تسع شركات لتوزيع الغازوال والبنزين بالجملة ضمن اتفاقات الصلح المبرمة مع المجلس، وذلك خلال الربع الأول من عام 2024.",
        date: "2024-03-31",
        link: "https://drive.google.com/file/d/1WmEvBcPE3RxRUUVdMYtmpq5_dumPovqU/view?usp=drive_link"
    },
    {
        title: "المبادئ التوجيهية المتعلقة بمراقبة عمليات التركيز الاقتصادي (دجنبر 2023)",
        description: "هذه الوثيقة هي المبادئ التوجيهية الصادرة عن مجلس المنافسة المغربي في دجنبر 2023، والتي تهدف إلى توفير تفاصيل بشأن سيرورة دراسة عمليات التركيز الاقتصادي ومراقبتها، سواء من حيث المسطرة المتبعة أو من حيث المضمون",
        date: "2023-12-15",
        link: "https://drive.google.com/file/d/1EqNrM7pIUNqIS1IyAjRkzoEGi1vDeX6R/view?usp=drive_link"
    },
    {
        title: "التقرير السنوي لمجلس المنافسة 2024",
        description: "هو التقرير السنوي الذي أصدره مجلس المنافسة المغربي برسم سنة 2024",
        date: "2024-12-31",
        link: "https://drive.google.com/file/d/1G91sYrBvJ97CbB8TWleIPrwBPEKwMaGx/view?usp=drive_link"
    },
    {
        title: "التقرير السنوي لمجلس المنافسة 2023",
        description: "هو التقرير السنوي لمجلس المنافسة المغربي برسم سنة 2023، والذي تم تقديمه إلى صاحب الجلالة الملك محمد السادس. يتناول التقرير وضعية المنافسة على الصعيدين الدولي والوطني، وحصيلة أنشطة المجلس لعام 2023.",
        date: "2023-12-31",
        link: "https://drive.google.com/file/d/1LzQhCqtVcxB2zlOwWQuADg1Y8VPJmopL/view?usp=drive_link"
    },
    {
        title: "التقرير السنوي 2022 لمجلس المنافسة",
        description: "هو التقرير السنوي الذي أصدره مجلس المنافسة المغربي برسم سنة 2022، وتم رفعه إلى الملك محمد السادس. يستعرض التقرير وضعية المنافسة على الصعيدين الدولي والوطني، وحصيلة أنشطة المجلس خلال هذه السنة التي تميزت بسياق عالمي مطبوع بعدم اليقين والتوترات الجيوسياسية والتضخم.",
        date: "2022-12-31",
        link: "https://drive.google.com/file/d/16ID54_UmYTdSW0dw4rVk7_kWhEhbJYIw/view?usp=drive_link"
    },
    {
        title: "التقرير السنوي لمجلس المنافسة 2021",
        description: "هو التقرير السنوي لمجلس المنافسة المغربي برسم سنة 2021، والمرفوع إلى الملك محمد السادس من لدن رئيس المجلس أحمد رحو. يستعرض التقرير وضعية المنافسة على الصعيدين الدولي والوطني وحصيلة أنشطة المجلس خلال هذه السنة.",
        date: "2021-12-31",
        link: "https://drive.google.com/file/d/1qD8RYNC31d_fgYxtd4v3qVK4FGW-Cf5C/view?usp=drive_link"
    }
];

// ========================================================================
// === الكود الخاص بتشغيل الموقع (لا تحتاج لتعديل ما هو أدناه) ===
// ========================================================================

document.addEventListener('DOMContentLoaded', () => {
    
    // Get references to DOM elements
    const accordionContainer = document.getElementById('accordion-container');
    const searchInput = document.getElementById('search-input');
    const sortSelect = document.getElementById('sort-select');
    const messageContainer = document.getElementById('message-container');

    // Function to render the list of papers
    function renderPapers(papers) {
        // Clear the existing list
        accordionContainer.innerHTML = ''; 
        
        if (papers.length === 0) {
            // Show a "no results" message
            messageContainer.classList.remove('hidden');
        } else {
            messageContainer.classList.add('hidden');
        }

        // Create HTML for each paper
        papers.forEach(paper => {
            const paperElement = document.createElement('div');
            paperElement.className = 'border-b border-gray-200'; // Container for each item
            
            paperElement.innerHTML = `
                <!-- Accordion Toggle Button -->
                <button class="accordion-toggle w-full flex justify-between items-center p-4 text-start hover:bg-gray-50 focus:outline-none">
                    <span class="text-lg font-semibold text-blue-700">${paper.title}</span>
                    <i class="fas fa-chevron-down text-gray-500 transition-transform duration-300"></i>
                </button>
                
                <!-- Accordion Content (Hidden by default) -->
                <div class="accordion-content px-4">
                    <p class="text-gray-700 mb-4">${paper.description}</p>
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                        <span class="text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full">
                            <i class="fas fa-calendar-alt me-2"></i>
                            تاريخ: ${paper.date}
                        </span>
                        <a 
                            href="${paper.link}" 
                            target="_blank" 
                            class="inline-block bg-blue-600 text-white font-bold px-5 py-2 rounded-lg shadow-md hover:bg-blue-700 transition duration-300 ease-in-out transform hover:-translate-y-0.5"
                        >
                            <i class="fas fa-file-pdf me-2"></i>
                            قراءة البحث
                        </a>
                    </div>
                </div>
            `;
            accordionContainer.appendChild(paperElement);
        });

        // Add click listeners to the *newly created* accordion buttons
        addAccordionListeners();
    }

    // Function to add click listeners to accordion toggles
    function addAccordionListeners() {
        document.querySelectorAll('.accordion-toggle').forEach(button => {
            button.addEventListener('click', () => {
                const content = button.nextElementSibling;
                
                // Toggle the 'open' class
                button.classList.toggle('open');
                content.classList.toggle('open');
            });
        });
    }

    // Function to update the display based on search and sort
    function updateDisplay() {
        const query = searchInput.value.toLowerCase();
        const sortBy = sortSelect.value;

        // 1. Filter the papers based on the search query
        const filteredPapers = papersData.filter(paper => 
            paper.title.toLowerCase().includes(query) || 
            paper.description.toLowerCase().includes(query)
        );

        // 2. Sort the filtered papers
        let sortedPapers = [...filteredPapers]; // Create a new array
        
        switch (sortBy) {
            case 'date-desc':
                sortedPapers.sort((a, b) => new Date(b.date) - new Date(a.date));
                break;
            case 'date-asc':
                sortedPapers.sort((a, b) => new Date(a.date) - new Date(b.date));
                break;
            case 'title-asc':
                sortedPapers.sort((a, b) => a.title.localeCompare(b.title, 'ar')); // 'ar' for Arabic-aware sorting
                break;
        }

        // 3. Re-render the list with the sorted and filtered data
        renderPapers(sortedPapers);
    }

    // Initial Setup
    // Add event listeners
    searchInput.addEventListener('input', updateDisplay);
    sortSelect.addEventListener('change', updateDisplay);

    // Initial render on page load
    updateDisplay(); 

    // Render sources list
    const sourcesContainer = document.getElementById('sources-container');
    if (sourcesContainer && Array.isArray(sourcesList)) {
        sourcesContainer.innerHTML = '';
        sourcesList.forEach((src) => {
            const a = document.createElement('a');
            a.href = src.link;
            a.target = '_blank';
            a.rel = 'noopener noreferrer';
            a.className = 'flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50/50 transition';
            a.innerHTML = `<i class="fa-solid fa-file-pdf text-blue-600"></i><span class="truncate">${src.name}</span>`;
            sourcesContainer.appendChild(a);
        });
    }
});

    </script>
</body>
</html>
